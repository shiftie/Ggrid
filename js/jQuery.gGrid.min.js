function randomXToY(e,t,n){var r=e+Math.random()*(t-e);return typeof n=="undefined"?Math.round(r):r.toFixed(n)}Ggrid={init:function(e,t,n){this.gridW=e.width();this.gridH=e.height();if(e.data("cell")){this.cellPerRow=e.data("cell")}else{this.cellPerRow=n.cellPerRow}this.bg=e.attr("src");e.before($('<div class="gGrid" data-cell="'+this.cellPerRow+'"></div>'));this.grid=e.prev();this.grid.css({width:this.gridW+"px",height:this.gridH+"px"});e.remove();this.cellSize=Math.round(this.gridW/this.cellPerRow);this.grid.css("height",this.gridH+"px");this.currentRow=1;this.totalRaws=1;this.isFadedIn=false;this.makeBoxes(t)},makeBoxes:function(e){var t=this;while(t.gridH>t.currentRow*t.cellSize){for(i=0;i<t.cellPerRow;i++){offsetW=i*t.cellSize;offsetH=(t.currentRow-1)*t.cellSize;cell=$("<div></div>").attr("class","cell").attr("id","grid"+e+"cell"+t.currentRow+"-"+i).width(t.cellSize).height(t.cellSize).css("left",offsetW).css("top",offsetH).css("opacity",0);cell.css("background","url("+t.bg+") -"+offsetW+"px -"+offsetH+"px");t.grid.append(cell)}t.currentRow=t.currentRow+1}for(i=0;i<t.cellPerRow;i++){offsetW=i*t.cellSize;offsetH=(t.currentRow-1)*t.cellSize;cell=$("<div></div>").attr("class","cell").attr("id","grid"+e+"cell"+t.currentRow+"-"+i).width(t.cellSize).height(t.cellSize).css("left",offsetW).css("top",offsetH).css("opacity",0);cell.css("background","url("+t.bg+") -"+offsetW+"px -"+offsetH+"px");t.grid.append(cell)}t.totalRaws=t.currentRow}};(function(e){e.fn.gGrid=function(t){var n=[];var r={minDelay:0,maxDelay:1.5,cellPerRow:8};var t=e.extend(r,t);return this.each(function(){obj=e(this);gGrid=Ggrid;gGrid.init(obj,n.length,t);n.push(e.extend({},gGrid));e(window).scroll(function(){visibleAreaTop=e(window).scrollTop();visibleAreaBottom=e(window).scrollTop()+e(window).height();for(g=0;g<n.length;g++){currentGrid=n[g];if(currentGrid.isFadedIn==false){for(i=1;i<=currentGrid.totalRaws;i++){if(visibleAreaBottom>e("#grid"+g+"cell"+i+"-0").offset().top&&visibleAreaTop<e("#grid"+g+"cell"+i+"-0").offset().top){if(e("#grid"+g+"cell"+i+"-0").css("opacity")!=1){for(j=0;j<currentGrid.cellPerRow;j++){delay=randomXToY(t.minDelay,t.maxDelay,2)+"s";e("#grid"+g+"cell"+i+"-"+j).css("-moz-transition-delay",delay).css("-webkit-transition-delay",delay).css("-o-transition-delay",delay).css("transition-delay",delay);e("#grid"+g+"cell"+i+"-"+j).css("opacity",1)}}}}}}});e(window).scroll()})}})(jQuery)